<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>A Concise Binary Object Representation (CBOR) of DNS Messages</title>
<meta content="Martine Sophie Lenders" name="author">
<meta content="Carsten Bormann" name="author">
<meta content="Thomas C. Schmidt" name="author">
<meta content="Matthias WÃ¤hlisch" name="author">
<meta content="
       This document specifies a compressed data format of DNS messages using
the Concise Binary Object Representation  .
The primary purpose is to keep DNS messages small in constrained networks. 
    " name="description">
<meta content="xml2rfc 3.21.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="CBOR" name="keyword">
<meta content="DNS" name="keyword">
<meta content="draft-lenders-dns-cbor-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.21.0
    Python 3.12.3
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.2.2
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 69.5.1
    six 1.16.0
    wcwidth 0.2.13
-->
<link href="draft-lenders-dns-cbor.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "â";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">dns+cbor</td>
<td class="right">June 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lenders, et al.</td>
<td class="center">Expires 28 December 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">CBOR</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-lenders-dns-cbor-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-06-26" class="published">26 June 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-12-28">28 December 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. S. Lenders</div>
<div class="org">TU Dresden</div>
</div>
<div class="author">
      <div class="author-name">C. Bormann</div>
<div class="org">UniversitÃ¤t Bremen TZI</div>
</div>
<div class="author">
      <div class="author-name">T. C. Schmidt</div>
<div class="org">HAW Hamburg</div>
</div>
<div class="author">
      <div class="author-name">M. WÃ¤hlisch</div>
<div class="org">TU Dresden &amp; Barkhausen Institut</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">A Concise Binary Object Representation (CBOR) of DNS Messages</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies a compressed data format of DNS messages using
the Concise Binary Object Representation <span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span>.
The primary purpose is to keep DNS messages small in constrained networks.<a href="#section-abstract-1" class="pilcrow">Â¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">Â¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://anr-bmbf-pivot.github.io/draft-lenders-dns-cbor/draft-lenders-dns-cbor.html">https://anr-bmbf-pivot.github.io/draft-lenders-dns-cbor/draft-lenders-dns-cbor.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-lenders-dns-cbor/">https://datatracker.ietf.org/doc/draft-lenders-dns-cbor/</a></span>.<a href="#section-note.1-2" class="pilcrow">Â¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        CBOR Working Group mailing list (<span><a href="mailto:cbor@ietf.org">mailto:cbor@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/cbor/">https://mailarchive.ietf.org/arch/browse/cbor/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/cbor/">https://www.ietf.org/mailman/listinfo/cbor/</a></span>.<a href="#section-note.1-3" class="pilcrow">Â¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/anr-bmbf-pivot/draft-lenders-dns-cbor">https://github.com/anr-bmbf-pivot/draft-lenders-dns-cbor</a></span>.<a href="#section-note.1-4" class="pilcrow">Â¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 December 2024.<a href="#section-boilerplate.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">â²</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.Â Â <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.Â Â <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.Â Â <a href="#name-cbor-representations-applic" class="internal xref">CBOR Representations (application/dns+cbor)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.Â Â <a href="#name-domain-name-representation" class="internal xref">Domain Name Representation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.Â Â <a href="#name-dns-resource-records" class="internal xref">DNS Resource Records</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="auto internal xref">3.2.1</a>.Â Â <a href="#name-standard-rrs" class="internal xref">Standard RRs</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="auto internal xref">3.2.2</a>.Â Â <a href="#name-edns-opt-pseudo-rrs" class="internal xref">EDNS OPT Pseudo-RRs</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.Â Â <a href="#name-dns-queries" class="internal xref">DNS Queries</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.Â Â <a href="#name-dns-responses" class="internal xref">DNS Responses</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.Â Â <a href="#name-name-and-address-compressio" class="internal xref">Name and Address Compression with CBOR-packed</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.Â Â <a href="#name-media-type-negotiation" class="internal xref">Media Type Negotiation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.Â Â <a href="#name-dns-representation-in-cbor-" class="internal xref">DNS Representation in CBOR-packed</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.Â Â <a href="#name-compression" class="internal xref">Compression</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.Â Â <a href="#name-implementation-status" class="internal xref">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.Â Â <a href="#name-python-decoder-encoder" class="internal xref">Python decoder/encoder</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.Â Â <a href="#name-embedded-decoder-encoder" class="internal xref">Embedded decoder/encoder</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.Â Â <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.Â Â <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.Â Â <a href="#name-media-type-registration" class="internal xref">Media Type Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="auto internal xref">7.1.1</a>.Â Â <a href="#name-application-dnscbor" class="internal xref">"application/dns+cbor"</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.Â Â <a href="#name-coap-content-format-registr" class="internal xref">CoAP Content-Format Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.Â Â <a href="#name-application-dnscbor-2" class="internal xref">"application/dns+cbor"</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="auto internal xref">7.2.2</a>.Â Â <a href="#name-application-dnscborpacked1" class="internal xref">"application/dns+cbor;packed=1"</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.Â Â <a href="#name-cbor-tags-registry" class="internal xref">CBOR Tags Registry</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.Â Â <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.Â Â <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.Â Â <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.Â Â <a href="#name-examples" class="internal xref">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.Â Â <a href="#name-dns-queries-2" class="internal xref">DNS Queries</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.Â Â <a href="#name-dns-responses-2" class="internal xref">DNS Responses</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.Â Â <a href="#name-comparison-to-wire-format" class="internal xref">Comparison to Wire Format</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.Â Â <a href="#name-change-log" class="internal xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-C.1" class="auto internal xref">C.1</a>.Â Â <a href="#name-since-draft-lenders-dns-cbo" class="internal xref">Since draft-lenders-dns-cbor-06</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-C.2" class="auto internal xref">C.2</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor" class="internal xref">Since draft-lenders-dns-cbor-05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#appendix-C.3" class="auto internal xref">C.3</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor-" class="internal xref">Since draft-lenders-dns-cbor-04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.4">
                <p id="section-toc.1-1.11.2.4.1"><a href="#appendix-C.4" class="auto internal xref">C.4</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor-0" class="internal xref">Since draft-lenders-dns-cbor-03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.5">
                <p id="section-toc.1-1.11.2.5.1"><a href="#appendix-C.5" class="auto internal xref">C.5</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor-02" class="internal xref">Since draft-lenders-dns-cbor-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.6">
                <p id="section-toc.1-1.11.2.6.1"><a href="#appendix-C.6" class="auto internal xref">C.6</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor-01" class="internal xref">Since draft-lenders-dns-cbor-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.7">
                <p id="section-toc.1-1.11.2.7.1"><a href="#appendix-C.7" class="auto internal xref">C.7</a>.Â Â <a href="#name-since-draft-lenders-dns-cbor-00" class="internal xref">Since draft-lenders-dns-cbor-00</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">In constrained networks <span>[<a href="#RFC7228" class="cite xref">RFC7228</a>]</span>, the link layer may restrict the payload sizes to
only a few hundreds bytes.  Encrypted DNS resolution, such as DNS over HTTPS (DoH) <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span> or
DNS over CoAP (DoC) <span>[<a href="#I-D.ietf-core-dns-over-coap" class="cite xref">I-D.ietf-core-dns-over-coap</a>]</span>, may lead to DNS message sizes that exceed this limit, even when
implementing header compression such as 6LoWPAN IPHC <span>[<a href="#RFC6282" class="cite xref">RFC6282</a>]</span> or SCHC <span>[<a href="#RFC8724" class="cite xref">RFC8724</a>]</span>,
<span>[<a href="#RFC8824" class="cite xref">RFC8824</a>]</span>.<a href="#section-1-1" class="pilcrow">Â¶</a></p>
<p id="section-1-2">Although adoption layers such as 6LoWPAN <span>[<a href="#RFC4944" class="cite xref">RFC4944</a>]</span> or SCHC <span>[<a href="#RFC8724" class="cite xref">RFC8724</a>]</span> offer fragmentation to
comply with small MTUs, fragmentation should be avoided in constrained networks, because
fragmentation combined with high packet loss multiplies the loss.  As such, a compression
format for DNS messages is needed.<a href="#section-1-2" class="pilcrow">Â¶</a></p>
<p id="section-1-3">This document specifies a compressed data format for DNS messages.  DNS messages are encoded in
Concise Binary Object Representation (CBOR) <span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span> and, additionally, unnecessary or
redundant information is removed.  To use the outcome of this specification in DoH and DoC,
this document also specifies a Media Type header for DoH and a Content-Format option for DoC.<a href="#section-1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">CBOR types (unsigned integer, byte string, text string, arrays, etc.) are used as defined in
<span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span>.<a href="#section-2-1" class="pilcrow">Â¶</a></p>
<p id="section-2-2">TBD DNS server and client.<a href="#section-2-2" class="pilcrow">Â¶</a></p>
<p id="section-2-3">A DNS query is a message that queries DNS information from an upstream DNS resolver.<a href="#section-2-3" class="pilcrow">Â¶</a></p>
<p id="section-2-4">The term "constrained networks" is used as defined in <span>[<a href="#RFC7228" class="cite xref">RFC7228</a>]</span>.<a href="#section-2-4" class="pilcrow">Â¶</a></p>
<p id="section-2-5">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCPÂ 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-5" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="cbor-representations-applicationdnscbor">
<section id="section-3">
      <h2 id="name-cbor-representations-applic">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-cbor-representations-applic" class="section-name selfRef">CBOR Representations (application/dns+cbor)</a>
      </h2>
<p id="section-3-1">To keep overhead minimal, a DNS message is represented as CBOR arrays.  All CBOR items used in
this specification are of definite length.  CBOR arrays that do not follow the length
definitions of this or follow-up specifications, <span class="bcp14">MUST</span> be silently ignored.  It is assumed that
DNS query and DNS response are distinguished message types and that the query can be mapped to
the response by the transfer protocol of choice.  To define the representation of binary
objects we use the Concise Data Definition Language (CDDL) <span>[<a href="#RFC8610" class="cite xref">RFC8610</a>]</span>.<a href="#section-3-1" class="pilcrow">Â¶</a></p>
<span id="name-this-document-defines-both-"></span><div id="fig_dns-msg">
<figure id="figure-1">
        <div class="lang-cddl sourcecode" id="section-3-2.1">
<pre>
dns-message = dns-query / dns-response
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-this-document-defines-both-" class="selfRef">This document defines both DNS Queries and Responses in CDDL</a>
        </figcaption></figure>
</div>
<p id="section-3-3">If, for any reason, a DNS message is not representable in the CBOR format specified in this
document, a fallback to the another DNS message format, e.g., the classic DNS wire format, <span class="bcp14">MUST</span>
always be possible.<a href="#section-3-3" class="pilcrow">Â¶</a></p>
<div id="sec_domain-names">
<section id="section-3.1">
        <h3 id="name-domain-name-representation">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-domain-name-representation" class="section-name selfRef">Domain Name Representation</a>
        </h3>
<p id="section-3.1-1">Domain names are represented in their commonly known string format (e.g., "example.org", see Section
2.3.1 in <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>) and in IDNA encoding <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span> as a text string. For the purpose of this
document, domain names remain case-insensitive as specified in <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>.<a href="#section-3.1-1" class="pilcrow">Â¶</a></p>
<p id="section-3.1-2">The representation of a domain name is defined in <a href="#fig_domain-name" class="auto internal xref">Figure 2</a>.<a href="#section-3.1-2" class="pilcrow">Â¶</a></p>
<p id="section-3.1-3">TBD: represent names as components (<code>(* tstr)</code>), provide name compression when <span>[<a href="#I-D.ietf-cbor-packed" class="cite xref">I-D.ietf-cbor-packed</a>]</span> is
updated for the reference format and table building discussed at IETF 118.<a href="#section-3.1-3" class="pilcrow">Â¶</a></p>
<span id="name-domain-name-definition"></span><div id="fig_domain-name">
<figure id="figure-2">
          <div class="lang-cddl sourcecode" id="section-3.1-4.1">
<pre>
domain-name = tstr .regexp "([^.]+[.])*[^.]+"
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-domain-name-definition" class="selfRef">Domain Name Definition</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="sec_rr">
<section id="section-3.2">
        <h3 id="name-dns-resource-records">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-dns-resource-records" class="section-name selfRef">DNS Resource Records</a>
        </h3>
<p id="section-3.2-1">This document specifies the representation of both standard DNS resource records (RRs, see <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>)
and EDNS option pseudo-RRs (see <span>[<a href="#RFC6891" class="cite xref">RFC6891</a>]</span>).
If for any reason, a resource record can not be represented in the given formats, they can be
represented in their binary wire-format form, as a byte string.<a href="#section-3.2-1" class="pilcrow">Â¶</a></p>
<p id="section-3.2-2">Further special records, e.g., TSIG can be defined in follow-up specifications and are out of scope
of this document.<a href="#section-3.2-2" class="pilcrow">Â¶</a></p>
<p id="section-3.2-3">The representation of a DNS resource records is defined in <a href="#fig_dns-rr" class="auto internal xref">Figure 3</a>.<a href="#section-3.2-3" class="pilcrow">Â¶</a></p>
<span id="name-dns-resource-record-definit"></span><div id="fig_dns-rr">
<figure id="figure-3">
          <div class="lang-cddl sourcecode" id="section-3.2-4.1">
<pre>
dns-rr = rr / #6.141(opt-rr) / bstr
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-dns-resource-record-definit" class="selfRef">DNS Resource Record Definition</a>
          </figcaption></figure>
</div>
<div id="standard-rrs">
<section id="section-3.2.1">
          <h4 id="name-standard-rrs">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-standard-rrs" class="section-name selfRef">Standard RRs</a>
          </h4>
<p id="section-3.2.1-1">Standard DNS resource records are encoded as CBOR arrays containing 2 to 5 entries in the following
order:<a href="#section-3.2.1-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.2.1-2">
<li id="section-3.2.1-2.1">
              <p id="section-3.2.1-2.1.1">An optional name (as text string, see <a href="#sec_domain-names" class="auto internal xref">Section 3.1</a>),<a href="#section-3.2.1-2.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li id="section-3.2.1-2.2">
              <p id="section-3.2.1-2.2.1">A TTL (as unsigned integer),<a href="#section-3.2.1-2.2.1" class="pilcrow">Â¶</a></p>
</li>
            <li id="section-3.2.1-2.3">
              <p id="section-3.2.1-2.3.1">An optional record type (as unsigned integer),<a href="#section-3.2.1-2.3.1" class="pilcrow">Â¶</a></p>
</li>
            <li id="section-3.2.1-2.4">
              <p id="section-3.2.1-2.4.1">An optional record class (as unsigned integer), and lastly<a href="#section-3.2.1-2.4.1" class="pilcrow">Â¶</a></p>
</li>
            <li id="section-3.2.1-2.5">
              <p id="section-3.2.1-2.5.1">A record data entry (as unsigned integer, negative integer, byte string, or text string).<a href="#section-3.2.1-2.5.1" class="pilcrow">Â¶</a></p>
</li>
          </ol>
<p id="section-3.2.1-3">If the first item of the resource record is a text string, it is its name.
If the name is elided, the name is derived from the question section of the message.
For responses, the question section is either taken from the query (see <a href="#sec_queries" class="auto internal xref">Section 3.3</a>) or provided
with the response see <a href="#sec_responses" class="auto internal xref">Section 3.4</a>.
The query may be derived from the context of the transfer protocol.<a href="#section-3.2.1-3" class="pilcrow">Â¶</a></p>
<p id="section-3.2.1-4">If the record type is elided, the record type from the question is assumed.
If record class is elided, the record class from the question is assumed.
When a record class is required, the record type <span class="bcp14">MUST</span> also be provided.<a href="#section-3.2.1-4" class="pilcrow">Â¶</a></p>
<p id="section-3.2.1-5">The byte format of the record data as a byte string follows the wire format as specified in Section
3.3 <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span> (or other specifications of the respective record type).  Note that this format does
not include the RDLENGTH field from <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span> as this value is encoded in the length field of the
CBOR byte string.<a href="#section-3.2.1-5" class="pilcrow">Â¶</a></p>
<p id="section-3.2.1-6">If the record data represents a domain name (e.g., for CNAME or PTR records), the record data <span class="bcp14">MAY</span> be
represented as a text string as specified in <a href="#sec_domain-names" class="auto internal xref">Section 3.1</a>.
This can save 1 byte of data, because the byte representation of DNS names requires both an
additional byte to define the length of the first name component and well as a zero byte at the end
of the name.
With CBOR on the other hand only 1 byte is required to define type and length of the text string up
until a string length of 23 characters.<a href="#section-3.2.1-6" class="pilcrow">Â¶</a></p>
<p id="section-3.2.1-7">There is an argument to be made for more structured formats of other record data representations
(e.g. MX or SOA), but these usually add more overhead. As such, those record data are to be
represented as a byte string.<a href="#section-3.2.1-7" class="pilcrow">Â¶</a></p>
<span id="name-dns-standard-resource-recor"></span><div id="fig_dns-standard-rr">
<figure id="figure-4">
            <div class="lang-cddl sourcecode" id="section-3.2.1-8.1">
<pre>
rr = [
  ? name: domain-name,
  ttl: uint,
  ? type-spec,
  rdata: bstr / domain-name,
]
type-spec = (
  record-type: uint,
  ? record-class: uint,
)
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-dns-standard-resource-recor" class="selfRef">DNS Standard Resource Record Definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="sec_edns">
<section id="section-3.2.2">
          <h4 id="name-edns-opt-pseudo-rrs">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-edns-opt-pseudo-rrs" class="section-name selfRef">EDNS OPT Pseudo-RRs</a>
          </h4>
<p id="section-3.2.2-1">EDNS OPT Pseudo-RRs are represented as a CBOR array.
To distinguish them from normal standard RRs, they are marked with tag TBD141.<a href="#section-3.2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-2">Name and record type can be elided as they are always "." and OPT (41), respectively <span>[<a href="#RFC6891" class="cite xref">RFC6891</a>]</span>.<a href="#section-3.2.2-2" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-3">The UDP payload size may be the first element as an unsigned integer in the array.
It <span class="bcp14">MUST</span> be
elided if its value is the default value of 512, the maximum allowable size for unextended DNS over UDP (see Sections <a href="https://rfc-editor.org/rfc/rfc1035#section-2.3.4" class="relref">2.3.4</a> and <a href="https://rfc-editor.org/rfc/rfc1035#section-4.2.1" class="relref">4.2.1</a> of <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>).<a href="#section-3.2.2-3" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-4">The next element is an array of the options, which are represented two elements each, an unsigned
integer, the option code, followed by a byte string, the option data.
Multiple options alternate between unsigned integer and byte string within the array.<a href="#section-3.2.2-4" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-5">After that, up to three unsigned integers are following.
The first being the extended flags as unsigned integer (implied to be 0 if elided),
the second the extended RCODE as an unsigned integer (implied to be 0 if elided), and
the third the EDNS version (implied to be 0 if elided).
They are dependent on each of their previous elements.
If the EDNS version is not elided, both extended flags and extended RCODE <span class="bcp14">MUST</span> not be elided.
If the RCODE is not elided the extended flags <span class="bcp14">MUST</span> not be elided.<a href="#section-3.2.2-5" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-6">TBD: reverse extended flags to get MSB-defined DO into LSB?<a href="#section-3.2.2-6" class="pilcrow">Â¶</a></p>
<p id="section-3.2.2-7">Note that future EDNS versions may require a different format than the one described above.<a href="#section-3.2.2-7" class="pilcrow">Â¶</a></p>
<span id="name-dns-opt-resource-record-def"></span><div id="fig_dns-opt-rr">
<figure id="figure-5">
            <div class="lang-cddl sourcecode" id="section-3.2.2-8.1">
<pre>
opt-rr = [
  ? udp-payload-size: uint .default 512,
  options: [* opt],
  ? opt-rcode-v-flags,
]
opt = (
  ocode: uint,
  odata: bstr,
)
opt-rcode-v-flags = (
  flags: uint .default 0,
  ? opt-rcode-v,
)
opt-rcode-v = (
  rcode: uint .default 0,
  ? version: uint .default 0,
)
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-dns-opt-resource-record-def" class="selfRef">DNS OPT Resource Record Definition</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sec_queries">
<section id="section-3.3">
        <h3 id="name-dns-queries">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-dns-queries" class="section-name selfRef">DNS Queries</a>
        </h3>
<p id="section-3.3-1">DNS queries are encoded as CBOR arrays containing up to 5 entries in the following order:<a href="#section-3.3-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.3-2">
<li id="section-3.3-2.1">
            <p id="section-3.3-2.1.1">An optional flag field (as unsigned integer),<a href="#section-3.3-2.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.3-2.2">
            <p id="section-3.3-2.2.1">The question section (as array),<a href="#section-3.3-2.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.3-2.3">
            <p id="section-3.3-2.3.1">An optional authority section (as array), and<a href="#section-3.3-2.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.3-2.4">
            <p id="section-3.3-2.4.1">An optional additional section (as array)<a href="#section-3.3-2.4.1" class="pilcrow">Â¶</a></p>
</li>
        </ol>
<p id="section-3.3-3">If the first item of the query is an array, it is the question section, if it is an unsigned
integer, it is as flag field and maps to the header flags in <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span> and the "DNS Header Flags"
IANA registry including the QR flag and the Opcode.
It <span class="bcp14">MUST</span> be lesser than 2^16.<a href="#section-3.3-3" class="pilcrow">Â¶</a></p>
<p id="section-3.3-4">If the flags are elided, the value 0 is assumed.<a href="#section-3.3-4" class="pilcrow">Â¶</a></p>
<p id="section-3.3-5">This specification assumes that the DNS messages are sent over a transfer protocol that can map the
queries to their responses, e.g., DNS over HTTPS <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span> or DNS over CoAP <span>[<a href="#I-D.ietf-core-dns-over-coap" class="cite xref">I-D.ietf-core-dns-over-coap</a>]</span>.
As a consequence, the DNS transaction ID is always elided and the value 0 is assumed.<a href="#section-3.3-5" class="pilcrow">Â¶</a></p>
<p id="section-3.3-6">A question within the question section is encoded as a CBOR array containing up to 3 entries:<a href="#section-3.3-6" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.3-7">
<li id="section-3.3-7.1">
            <p id="section-3.3-7.1.1">The queried name (as text string, see <a href="#sec_domain-names" class="auto internal xref">Section 3.1</a>),<a href="#section-3.3-7.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.3-7.2">
            <p id="section-3.3-7.2.1">An optional record type (as unsigned integer), and<a href="#section-3.3-7.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.3-7.3">
            <p id="section-3.3-7.3.1">An optional record class (as unsigned integer)<a href="#section-3.3-7.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ol>
<p id="section-3.3-8">If the record type is elided, record type <code>AAAA</code> as specified in <span>[<a href="#RFC3596" class="cite xref">RFC3596</a>]</span> is assumed.
If the record class is elided, record class <code>IN</code> as specified in <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span> is assumed.
When a record class is required, the record type <span class="bcp14">MUST</span> also be provided.<a href="#section-3.3-8" class="pilcrow">Â¶</a></p>
<p id="section-3.3-9">If more than one question is supposed to be in the question section, the next question just follows.
In this case, for every question but the last, the record type <span class="bcp14">MUST</span> be included, i.e., it is not
optional. This way it is ensured that the parser can distinguish each question by looking up the
name first (TBD note: this is especially relevant once the name is split up in components).<a href="#section-3.3-9" class="pilcrow">Â¶</a></p>
<p id="section-3.3-10">The remainder of the query is either empty or <span class="bcp14">MUST</span> consist of up to two arrays.
The first array, if present, encodes the authority section of the query as an array of DNS
resource records (see <a href="#sec_rr" class="auto internal xref">Section 3.2</a>)
The second array, if present, encodes the additional section of the query as an array of DNS
resource records (see <a href="#sec_rr" class="auto internal xref">Section 3.2</a>)<a href="#section-3.3-10" class="pilcrow">Â¶</a></p>
<p id="section-3.3-11">The representation of a DNS query is defined in <a href="#fig_dns-query" class="auto internal xref">Figure 6</a>.<a href="#section-3.3-11" class="pilcrow">Â¶</a></p>
<span id="name-dns-query-definition"></span><div id="fig_dns-query">
<figure id="figure-6">
          <div class="lang-cddl sourcecode" id="section-3.3-12.1">
<pre>
dns-query = [
  ? flags: uint .default 0x0000,
  question-section,
  ? extra-sections,
]
question-section = [
  * full-question,
  ? last-question,
]
full-question = (
  name: domain-name,
  type-spec,
)
last-question = (
  name: domain-name,
  ? type-spec,
)
extra-sections = (
  ? authority: [+ dns-rr],
  additional: [+ dns-rr],
)
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-dns-query-definition" class="selfRef">DNS Query Definition</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="sec_responses">
<section id="section-3.4">
        <h3 id="name-dns-responses">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-dns-responses" class="section-name selfRef">DNS Responses</a>
        </h3>
<p id="section-3.4-1">DNS responses are encoded as a CBOR array containing up to 7 entries.<a href="#section-3.4-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.4-2">
<li id="section-3.4-2.1">
            <p id="section-3.4-2.1.1">An optional flag field (as unsigned integer),<a href="#section-3.4-2.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.4-2.2">
            <p id="section-3.4-2.2.1">An optional question section (as array, encoded as described in <a href="#sec_queries" class="auto internal xref">Section 3.3</a>)<a href="#section-3.4-2.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.4-2.3">
            <p id="section-3.4-2.3.1">The answer section (as array),<a href="#section-3.4-2.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.4-2.4">
            <p id="section-3.4-2.4.1">An optional authority section (as array), and<a href="#section-3.4-2.4.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-3.4-2.5">
            <p id="section-3.4-2.5.1">An optional additional section (as array)<a href="#section-3.4-2.5.1" class="pilcrow">Â¶</a></p>
</li>
        </ol>
<p id="section-3.4-3">As for queries, the DNS transaction ID is elided and implied to be 0.<a href="#section-3.4-3" class="pilcrow">Â¶</a></p>
<p id="section-3.4-4">If the CBOR array is a response to a query for which the flags indicate that flags are set in the
response, they <span class="bcp14">MUST</span> be set accordingly and thus included in the response.
If the flags are not included, the flags are implied to be 0x8000 (everything unset except for the
QR flag).<a href="#section-3.4-4" class="pilcrow">Â¶</a></p>
<p id="section-3.4-5">If the response includes only 1 array, this is the DNS answer section represented as an
array of one or more DNS Resource Records (see <a href="#sec_rr" class="auto internal xref">Section 3.2</a>).<a href="#section-3.4-5" class="pilcrow">Â¶</a></p>
<p id="section-3.4-6">If the response includes more than 2 arrays, the first entry may be the question section, identified
by not being an array of arrays. If it is present, it is followed by the answer section. The
question section is encoded as specified in <a href="#sec_queries" class="auto internal xref">Section 3.3</a>.<a href="#section-3.4-6" class="pilcrow">Â¶</a></p>
<p id="section-3.4-7">If the answer section is followed by 1 additional array, it is the additional section (TBD:
back choice to favor additional section by empirical data). Like the answer section, the additional
section is represented as an array of one or more DNS Resource Records (see <a href="#sec_rr" class="auto internal xref">Section 3.2</a>).<a href="#section-3.4-7" class="pilcrow">Â¶</a></p>
<p id="section-3.4-8">If the answer section is followed by 2 additional arrays, the first is the authority section, and
the second the additional section (TBD: back choice to favor additional section by empirical data).
The authority section is also represented as an array of one or more DNS Resource Records (see
<a href="#sec_rr" class="auto internal xref">Section 3.2</a>).<a href="#section-3.4-8" class="pilcrow">Â¶</a></p>
<span id="name-dns-response-definition"></span><div id="fig_dns-response">
<figure id="figure-7">
          <div class="lang-cddl sourcecode" id="section-3.4-9.1">
<pre>
dns-response = [
  ? flags: uint .default 0x8000,
  ? question-section,
  answer-section: [+ dns-rr],
  ? extra-sections,
]
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-dns-response-definition" class="selfRef">DNS Response Definition</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="name-and-address-compression-with-cbor-packed">
<section id="section-4">
      <h2 id="name-name-and-address-compressio">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-name-and-address-compressio" class="section-name selfRef">Name and Address Compression with CBOR-packed</a>
      </h2>
<p id="section-4-1">If both DNS server and client support CBOR-packed <span>[<a href="#I-D.ietf-cbor-packed" class="cite xref">I-D.ietf-cbor-packed</a>]</span>, it <span class="bcp14">MAY</span> be used for name and
address compression in DNS responses.<a href="#section-4-1" class="pilcrow">Â¶</a></p>
<div id="media-type-negotiation">
<section id="section-4.1">
        <h3 id="name-media-type-negotiation">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-media-type-negotiation" class="section-name selfRef">Media Type Negotiation</a>
        </h3>
<p id="section-4.1-1">A DNS client uses media type "application/dns+cbor;packed=1" to negotiate (see, e.g.,
<span>[<a href="#RFC9110" class="cite xref">RFC9110</a>]</span> or <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>, Section 5.5.4) with the DNS server if the server supports packed
CBOR.
If it does, it <span class="bcp14">MAY</span> request the response to be in CBOR-packed (media type
"applicaton/dns+cbor;packed=1").
The server then <span class="bcp14">SHOULD</span> reply with the response in CBOR-packed.<a href="#section-4.1-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="dns-representation-in-cbor-packed">
<section id="section-4.2">
        <h3 id="name-dns-representation-in-cbor-">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-dns-representation-in-cbor-" class="section-name selfRef">DNS Representation in CBOR-packed</a>
        </h3>
<p id="section-4.2-1">The representation of DNS responses in CBOR-packed has the same semantics as for tag TBD113
(<span>[<a href="#I-D.ietf-cbor-packed" class="cite xref">I-D.ietf-cbor-packed</a>]</span>, Section 3.1) with the rump being the compressed response.
The difference to <span>[<a href="#I-D.ietf-cbor-packed" class="cite xref">I-D.ietf-cbor-packed</a>]</span> is that tag TBD113 is <span class="bcp14">OPTIONAL</span>.<a href="#section-4.2-1" class="pilcrow">Â¶</a></p>
<p id="section-4.2-2">Packed compression of queries is not specified, as apart from EDNS(0) (see <a href="#sec_edns" class="auto internal xref">Section 3.2.2</a>), they only
consist of one question most of the time.<a href="#section-4.2-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="sec_pack-compression">
<section id="section-4.3">
        <h3 id="name-compression">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-compression" class="section-name selfRef">Compression</a>
        </h3>
<p id="section-4.3-1">How the compressor constructs the packing table, i.e., how the compression is applied, is out of
scope of this document. Several potential compression algorithms were evaluated in [TBD].<a href="#section-4.3-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="implementation-status">
<section id="section-5">
      <h2 id="name-implementation-status">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-5-1">This section records the status of known implementations of the
protocol defined by this specification at the time of posting of
this Internet-Draft, and is based on a proposal described in
<span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>.  The description of implementations in this section is
intended to assist the IETF in its decision processes in
progressing drafts to RFCs.  Please note that the listing of any
individual implementation here does not imply endorsement by the
IETF.  Furthermore, no effort has been spent to verify the
information presented here that was supplied by IETF contributors.
This is not intended as, and must not be construed to be, a
catalog of available implementations or their features.  Readers
are advised to note that other implementations may exist.<a href="#section-5-1" class="pilcrow">Â¶</a></p>
<p id="section-5-2">According to <span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>, "this will allow reviewers and working
groups to assign due consideration to documents that have the
benefit of running code, which may serve as evidence of valuable
experimentation and feedback that have made the implemented
protocols more mature.  It is up to the individual working groups
to use this information as they see fit".<a href="#section-5-2" class="pilcrow">Â¶</a></p>
<div id="python-decoderencoder">
<section id="section-5.1">
        <h3 id="name-python-decoder-encoder">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-python-decoder-encoder" class="section-name selfRef">Python decoder/encoder</a>
        </h3>
<p id="section-5.1-1">The authors of this document provide a <a href="https://github.com/netd-tud/cbor4dns">decoder/encoder
implementation</a> of both the unpacked and packed format
specified in this document in Python.<a href="#section-5.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.1-2">
          <dt id="section-5.1-2.1">Level of maturity:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.2">
            <p id="section-5.1-2.2.1">prototype<a href="#section-5.1-2.2.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.3">Version compatibility:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.4">
            <p id="section-5.1-2.4.1">draft-lenders-dns-cbor-05<a href="#section-5.1-2.4.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.5">License:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.6">
            <p id="section-5.1-2.6.1">MIT<a href="#section-5.1-2.6.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.7">Contact information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.8">
            <p id="section-5.1-2.8.1"><code>Martine Lenders &lt;martine.lenders@tu-dresden.de&gt;</code><a href="#section-5.1-2.8.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.9">Last update of this information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.10">
            <p id="section-5.1-2.10.1">October 2023<a href="#section-5.1-2.10.1" class="pilcrow">Â¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="embedded-decoderencoder">
<section id="section-5.2">
        <h3 id="name-embedded-decoder-encoder">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-embedded-decoder-encoder" class="section-name selfRef">Embedded decoder/encoder</a>
        </h3>
<p id="section-5.2-1">The authors of this document provide a <a href="https://github.com/RIOT-OS/RIOT/pull/19989">decoder/encoder
implementation</a> of the unpacked format specified in this
document for the RIOT operating system. It can only encode queries and decode responses.<a href="#section-5.2-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2-2">
          <dt id="section-5.2-2.1">Level of maturity:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.2">
            <p id="section-5.2-2.2.1">prototype<a href="#section-5.2-2.2.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.3">Version compatibility:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.4">
            <p id="section-5.2-2.4.1">draft-lenders-dns-cbor-05<a href="#section-5.2-2.4.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.5">License:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.6">
            <p id="section-5.2-2.6.1">MIT<a href="#section-5.2-2.6.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.7">Contact information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.8">
            <p id="section-5.2-2.8.1"><code>Martine Lenders &lt;martine.lenders@tu-dresden.de&gt;</code><a href="#section-5.2-2.8.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.9">Last update of this information:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.10">
            <p id="section-5.2-2.10.1">October 2023<a href="#section-5.2-2.10.1" class="pilcrow">Â¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">TODO Security<a href="#section-6-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="media-type">
<section id="section-7.1">
        <h3 id="name-media-type-registration">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-media-type-registration" class="section-name selfRef">Media Type Registration</a>
        </h3>
<p id="section-7.1-1">This document registers a media type for the serialization format of DNS messages in CBOR. It
follows the procedures specified in <span>[<a href="#RFC6838" class="cite xref">RFC6838</a>]</span>.<a href="#section-7.1-1" class="pilcrow">Â¶</a></p>
<div id="applicationdnscbor">
<section id="section-7.1.1">
          <h4 id="name-application-dnscbor">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-application-dnscbor" class="section-name selfRef">"application/dns+cbor"</a>
          </h4>
<p id="section-7.1.1-1">Type name: application<a href="#section-7.1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-2">Subtype name: dns+cbor<a href="#section-7.1.1-2" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-3">Required parameters: None<a href="#section-7.1.1-3" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-4">Optional parameters: packed<a href="#section-7.1.1-4" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-5">Encoding considerations: Must be encoded as using <span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span>. See [TBD-this-spec] for details.<a href="#section-7.1.1-5" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-6">Security considerations: See <a href="#security-considerations" class="auto internal xref">Section 6</a> of this draft<a href="#section-7.1.1-6" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-7">Interoperability considerations: TBD<a href="#section-7.1.1-7" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-8">Published specification: [TBD-this-spec]<a href="#section-7.1.1-8" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-9">Applications that use this media type: TBD DNS over X systems<a href="#section-7.1.1-9" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-10">Fragment Identifier Considerations: TBD<a href="#section-7.1.1-10" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-11">Additional information:<a href="#section-7.1.1-11" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-12">Â Â Â Deprecated alias names for this type: N/A<a href="#section-7.1.1-12" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-13">Â Â Â Magic number(s): N/A<a href="#section-7.1.1-13" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-14">Â Â Â File extension(s): dnsc<a href="#section-7.1.1-14" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-15">Â Â Â Macintosh file type code(s): none<a href="#section-7.1.1-15" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-16">Person &amp; email address to contact for further information:
   Martine S. Lenders <a href="mailto:m.lenders@fu-berlin.de">m.lenders@fu-berlin.de</a><a href="#section-7.1.1-16" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-17">Intended usage: COMMON<a href="#section-7.1.1-17" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-18">Restrictions on Usage: None?<a href="#section-7.1.1-18" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-19">Author: Martine S. Lenders <a href="mailto:m.lenders@fu-berlin.de">m.lenders@fu-berlin.de</a><a href="#section-7.1.1-19" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-20">Change controller: Martine S. Lenders <a href="mailto:m.lenders@fu-berlin.de">m.lenders@fu-berlin.de</a><a href="#section-7.1.1-20" class="pilcrow">Â¶</a></p>
<p id="section-7.1.1-21">Provisional registrations? No<a href="#section-7.1.1-21" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="coap-content-format-registration">
<section id="section-7.2">
        <h3 id="name-coap-content-format-registr">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-coap-content-format-registr" class="section-name selfRef">CoAP Content-Format Registration</a>
        </h3>
<p id="section-7.2-1">IANA is requested to assign CoAP Content-Format ID for the new DNS message media
types in the "CoAP Content-Formats"
sub-registry, within the "CoRE Parameters" registry <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>, corresponding the
"application/dns+cbor" media type specified in <a href="#media-type" class="auto internal xref">Section 7.1</a>:<a href="#section-7.2-1" class="pilcrow">Â¶</a></p>
<div id="cf-app-d-c">
<section id="section-7.2.1">
          <h4 id="name-application-dnscbor-2">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-application-dnscbor-2" class="section-name selfRef">"application/dns+cbor"</a>
          </h4>
<p id="section-7.2.1-1">Media-Type: application/dns+cbor<a href="#section-7.2.1-1" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1-2">Encoding: -<a href="#section-7.2.1-2" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1-3">Id: TBD<a href="#section-7.2.1-3" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1-4">Reference: [TBD-this-spec]<a href="#section-7.2.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="applicationdnscborpacked1">
<section id="section-7.2.2">
          <h4 id="name-application-dnscborpacked1">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-application-dnscborpacked1" class="section-name selfRef">"application/dns+cbor;packed=1"</a>
          </h4>
<p id="section-7.2.2-1">Media-Type: application/dns+cbor;packed=1<a href="#section-7.2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-2">Encoding: -<a href="#section-7.2.2-2" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-3">Id: TBD<a href="#section-7.2.2-3" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-4">Reference: [TBD-this-spec]<a href="#section-7.2.2-4" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="cbor-tags-registry">
<section id="section-7.3">
        <h3 id="name-cbor-tags-registry">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-cbor-tags-registry" class="section-name selfRef">CBOR Tags Registry</a>
        </h3>
<p id="section-7.3-1">In the registry "<a href="http://www.iana.org/assignments/cbor-tags#cbor-tags" class="relref">CBOR Tags</a>" <span>[<a href="#IANA.cbor-tags" class="cite xref">IANA.cbor-tags</a>]</span>,
IANA is requested to allocate the tags defined in <a href="#tab-tag-values" class="auto internal xref">Table 1</a>.<a href="#section-7.3-1" class="pilcrow">Â¶</a></p>
<span id="name-values-for-tag-numbers"></span><div id="tab-tag-values">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-values-for-tag-numbers" class="selfRef">Values for Tag Numbers</a>
          </caption>
<thead>
            <tr>
              <th class="text-right" rowspan="1" colspan="1">Tag</th>
              <th class="text-left" rowspan="1" colspan="1">Data Item</th>
              <th class="text-left" rowspan="1" colspan="1">Semantics</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">TBD141</td>
              <td class="text-left" rowspan="1" colspan="1">array</td>
              <td class="text-left" rowspan="1" colspan="1">CBOR EDNS option record</td>
              <td class="text-left" rowspan="1" colspan="1">draft-lenders-dns-cbor</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-cbor-packed">[I-D.ietf-cbor-packed]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">M. GÃ¼tschow</span>, <span class="refTitle">"Packed CBOR"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-cbor-packed-12</span>, <time datetime="2024-03-02" class="refDate">2 March 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-cbor-packed-12">https://datatracker.ietf.org/doc/html/draft-ietf-cbor-packed-12</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.cbor-tags">[IANA.cbor-tags]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR) Tags"</span>, <span>&lt;<a href="http://www.iana.org/assignments/cbor-tags">http://www.iana.org/assignments/cbor-tags</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1035">[RFC1035]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1035">https://www.rfc-editor.org/rfc/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3596">[RFC3596]</dt>
        <dd>
<span class="refAuthor">Thomson, S.</span>, <span class="refAuthor">Huitema, C.</span>, <span class="refAuthor">Ksinant, V.</span>, and <span class="refAuthor">M. Souissi</span>, <span class="refTitle">"DNS Extensions to Support IP Version 6"</span>, <span class="seriesInfo">STD 88</span>, <span class="seriesInfo">RFC 3596</span>, <span class="seriesInfo">DOI 10.17487/RFC3596</span>, <time datetime="2003-10" class="refDate">October 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3596">https://www.rfc-editor.org/rfc/rfc3596</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5890">[RFC5890]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span>, <span class="refTitle">"Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework"</span>, <span class="seriesInfo">RFC 5890</span>, <span class="seriesInfo">DOI 10.17487/RFC5890</span>, <time datetime="2010-08" class="refDate">August 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5890">https://www.rfc-editor.org/rfc/rfc5890</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6838">[RFC6838]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span>, <span class="refAuthor">Klensin, J.</span>, and <span class="refAuthor">T. Hansen</span>, <span class="refTitle">"Media Type Specifications and Registration Procedures"</span>, <span class="seriesInfo">BCP 13</span>, <span class="seriesInfo">RFC 6838</span>, <span class="seriesInfo">DOI 10.17487/RFC6838</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6891">[RFC6891]</dt>
        <dd>
<span class="refAuthor">Damas, J.</span>, <span class="refAuthor">Graff, M.</span>, and <span class="refAuthor">P. Vixie</span>, <span class="refTitle">"Extension Mechanisms for DNS (EDNS(0))"</span>, <span class="seriesInfo">STD 75</span>, <span class="seriesInfo">RFC 6891</span>, <span class="seriesInfo">DOI 10.17487/RFC6891</span>, <time datetime="2013-04" class="refDate">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6891">https://www.rfc-editor.org/rfc/rfc6891</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7252">[RFC7252]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Hartke, K.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"The Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7252</span>, <span class="seriesInfo">DOI 10.17487/RFC7252</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7252">https://www.rfc-editor.org/rfc/rfc7252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8610">[RFC8610]</dt>
        <dd>
<span class="refAuthor">Birkholz, H.</span>, <span class="refAuthor">Vigano, C.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures"</span>, <span class="seriesInfo">RFC 8610</span>, <span class="seriesInfo">DOI 10.17487/RFC8610</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8610">https://www.rfc-editor.org/rfc/rfc8610</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8949">[RFC8949]</dt>
      <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">STD 94</span>, <span class="seriesInfo">RFC 8949</span>, <span class="seriesInfo">DOI 10.17487/RFC8949</span>, <time datetime="2020-12" class="refDate">December 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8949">https://www.rfc-editor.org/rfc/rfc8949</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-core-dns-over-coap">[I-D.ietf-core-dns-over-coap]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refAuthor">GÃ¼ndoÄan, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. WÃ¤hlisch</span>, <span class="refTitle">"DNS over CoAP (DoC)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-dns-over-coap-06</span>, <time datetime="2024-03-04" class="refDate">4 March 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-06">https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4944">[RFC4944]</dt>
        <dd>
<span class="refAuthor">Montenegro, G.</span>, <span class="refAuthor">Kushalnagar, N.</span>, <span class="refAuthor">Hui, J.</span>, and <span class="refAuthor">D. Culler</span>, <span class="refTitle">"Transmission of IPv6 Packets over IEEE 802.15.4 Networks"</span>, <span class="seriesInfo">RFC 4944</span>, <span class="seriesInfo">DOI 10.17487/RFC4944</span>, <time datetime="2007-09" class="refDate">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4944">https://www.rfc-editor.org/rfc/rfc4944</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6282">[RFC6282]</dt>
        <dd>
<span class="refAuthor">Hui, J., Ed.</span> and <span class="refAuthor">P. Thubert</span>, <span class="refTitle">"Compression Format for IPv6 Datagrams over IEEE 802.15.4-Based Networks"</span>, <span class="seriesInfo">RFC 6282</span>, <span class="seriesInfo">DOI 10.17487/RFC6282</span>, <time datetime="2011-09" class="refDate">September 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6282">https://www.rfc-editor.org/rfc/rfc6282</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7228">[RFC7228]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7228">https://www.rfc-editor.org/rfc/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7942">[RFC7942]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span> and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Improving Awareness of Running Code: The Implementation Status Section"</span>, <span class="seriesInfo">BCP 205</span>, <span class="seriesInfo">RFC 7942</span>, <span class="seriesInfo">DOI 10.17487/RFC7942</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7942">https://www.rfc-editor.org/rfc/rfc7942</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8484">[RFC8484]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">P. McManus</span>, <span class="refTitle">"DNS Queries over HTTPS (DoH)"</span>, <span class="seriesInfo">RFC 8484</span>, <span class="seriesInfo">DOI 10.17487/RFC8484</span>, <time datetime="2018-10" class="refDate">October 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8484">https://www.rfc-editor.org/rfc/rfc8484</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8724">[RFC8724]</dt>
        <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Barthel, D.</span>, and <span class="refAuthor">JC. Zuniga</span>, <span class="refTitle">"SCHC: Generic Framework for Static Context Header Compression and Fragmentation"</span>, <span class="seriesInfo">RFC 8724</span>, <span class="seriesInfo">DOI 10.17487/RFC8724</span>, <time datetime="2020-04" class="refDate">April 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8724">https://www.rfc-editor.org/rfc/rfc8724</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8824">[RFC8824]</dt>
        <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, and <span class="refAuthor">R. Andreasen</span>, <span class="refTitle">"Static Context Header Compression (SCHC) for the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 8824</span>, <span class="seriesInfo">DOI 10.17487/RFC8824</span>, <time datetime="2021-06" class="refDate">June 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8824">https://www.rfc-editor.org/rfc/rfc8824</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9110">[RFC9110]</dt>
      <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="examples">
<section id="appendix-A">
      <h2 id="name-examples">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<div id="sec_query-examples">
<section id="appendix-A.1">
        <h3 id="name-dns-queries-2">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-dns-queries-2" class="section-name selfRef">DNS Queries</a>
        </h3>
<p id="appendix-A.1-1">A DNS query of the record <code>AAAA</code> in class <code>IN</code> for name "example.org" is
represented in CBOR extended diagnostic notation (EDN) (see Section 8 in
<span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span> and Appendix G in <span>[<a href="#RFC8610" class="cite xref">RFC8610</a>]</span>) as follows:<a href="#appendix-A.1-1" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.1-2">
<pre>
[["example.org"]]
</pre><a href="#appendix-A.1-2" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.1-3">A query of an <code>A</code> record for the same name is represented as<a href="#appendix-A.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.1-4">
<pre>
[["example.org", 1]]
</pre><a href="#appendix-A.1-4" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.1-5">A query of <code>ANY</code> record for that name is represented as<a href="#appendix-A.1-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.1-6">
<pre>
[["example.org", 255, 255]]
</pre><a href="#appendix-A.1-6" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<div id="sec_response-examples">
<section id="appendix-A.2">
        <h3 id="name-dns-responses-2">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-dns-responses-2" class="section-name selfRef">DNS Responses</a>
        </h3>
<p id="appendix-A.2-1">The responses to the examples provided in <a href="#sec_query-examples" class="auto internal xref">Appendix A.1</a> are shown
below. We use the CBOR extended diagnostic notation (EDN) (see Section 8 in
<span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span> and Appendix G in <span>[<a href="#RFC8610" class="cite xref">RFC8610</a>]</span>).<a href="#appendix-A.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2-2">To represent an <code>AAAA</code> record with TTL 300 seconds for the IPv6 address 2001:db8::1, a minimal
response to <code>["example.org"]</code> could be<a href="#appendix-A.2-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2-3">
<pre>
[[[300, h'20010db8000000000000000000000001']]]
</pre><a href="#appendix-A.2-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2-4">In this case, the name is derived from the query.<a href="#appendix-A.2-4" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2-5">If the name or the context is required, the following response would also
be valid:<a href="#appendix-A.2-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2-6">
<pre>
[[["example.org", 300, h'20010db8000000000000000000000001']]]
</pre><a href="#appendix-A.2-6" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2-7">If the query can not be mapped to the response for some reason, a response
would look like:<a href="#appendix-A.2-7" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2-8">
<pre>
[["example.org"], [[300, h'20010db8000000000000000000000001']]]
</pre><a href="#appendix-A.2-8" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2-9">To represent a minimal response of an <code>A</code> record with TTL 3600 seconds for the IPv4 address
192.0.2.1, a minimal response to <code>["example.org", 1]</code> could be<a href="#appendix-A.2-9" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2-10">
<pre>
[[300, h'c0000201']]
</pre><a href="#appendix-A.2-10" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2-11">Note that here also the 1 of record type <code>A</code> can be elided, as this record
type is specified in the question section.<a href="#appendix-A.2-11" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2-12">Lastly, a response to <code>["example.org", 255, 255]</code> could be<a href="#appendix-A.2-12" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2-13">
<pre>
[
  ["example.org", 12, 1],
  [[3600, "_coap._udp.local"]],
  [
    [3600, 2, "ns1.example.org"],
    [3600, 2, "ns2.example.org"]
  ],
  [
    [
      "_coap._udp.local", 3600, 28,
      h'20010db8000000000000000000000001'
    ],
    [
      "_coap._udp.local", 3600, 28,
      h'20010db8000000000000000000000002'
    ],
    [
      "ns1.example.org", 3600, 28,
      h'20010db8000000000000000000000035'
    ],
    [
      "ns2.example.org", 3600, 28,
      h'20010db8000000000000000000003535'
    ]
  ]
]
</pre><a href="#appendix-A.2-13" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2-14">This one advertises two local CoAP servers (identified by service name <code>_coap._udp.local</code>) at
2001:db8::1 and 2001:db8::2 and two nameservers for the example.org domain, ns1.example.org at
2001:db8::35 and ns2.example.org at 2001.db8::3535. Each of the transmitted records has a TTL of
3600 seconds.<a href="#appendix-A.2-14" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="comparison-to-wire-format">
<section id="appendix-B">
      <h2 id="name-comparison-to-wire-format">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-comparison-to-wire-format" class="section-name selfRef">Comparison to Wire Format</a>
      </h2>
<p id="appendix-B-1"><a href="#tab-cbor-comparison" class="auto internal xref">Table 2</a> shows a comparison between the wire format and the application/dns+cbor
format. Note that the worst case results typically appear only rarely in DNS. The DNS wire format is
preferred in those cases. A key for which configuration was used in which case can be seen in
<a href="#tab-cbor-comparison-key" class="auto internal xref">Table 3</a>.<a href="#appendix-B-1" class="pilcrow">Â¶</a></p>
<span id="name-comparison-of-application-d"></span><div id="tab-cbor-comparison">
<table class="center" id="table-2">
        <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-comparison-of-application-d" class="selfRef">Comparison of application/dns+cbor to classic DNS format.</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="2" colspan="1">Item</th>
            <th class="text-right" rowspan="2" colspan="1">Classic DNS format [bytes]</th>
            <th class="text-center" rowspan="1" colspan="3">application/dns+cbor [bytes]</th>
          </tr>
          <tr>
            <th class="text-right" rowspan="1" colspan="1">best case</th>
            <th class="text-right" rowspan="1" colspan="1">realistic worst case</th>
            <th class="text-right" rowspan="1" colspan="1">theoretical worst case</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Header (ID &amp; Flags)</td>
            <td class="text-right" rowspan="1" colspan="1">4</td>
            <td class="text-right" rowspan="1" colspan="1">1</td>
            <td class="text-right" rowspan="1" colspan="1">4</td>
            <td class="text-right" rowspan="1" colspan="1">4</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Count fields</td>
            <td class="text-right" rowspan="1" colspan="1">2</td>
            <td class="text-right" rowspan="1" colspan="1">1</td>
            <td class="text-right" rowspan="1" colspan="1">3</td>
            <td class="text-right" rowspan="1" colspan="1">3</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Question section</td>
            <td class="text-right" rowspan="1" colspan="1">6Â +Â nameÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">2Â +Â nameÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">7Â +Â nameÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">10Â +Â nameÂ len.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Standard RR</td>
            <td class="text-right" rowspan="1" colspan="1">12Â +Â nameÂ len. + rdataÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">3        <br>
 +Â rdataÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">15Â +Â nameÂ len. + rdataÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">18Â +Â nameÂ len. + rdataÂ len.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EDNS Opt Pseudo-RR</td>
            <td class="text-right" rowspan="1" colspan="1">11 + options</td>
            <td class="text-right" rowspan="1" colspan="1">2 + options</td>
            <td class="text-right" rowspan="1" colspan="1">6 + options</td>
            <td class="text-right" rowspan="1" colspan="1">14 + options</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EDNS Option</td>
            <td class="text-right" rowspan="1" colspan="1">4 + valueÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">2 + valueÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">4 + valueÂ len.</td>
            <td class="text-right" rowspan="1" colspan="1">6 + valueÂ len.</td>
          </tr>
        </tbody>
      </table>
</div>
<span id="name-configuration-key-for"></span><div id="tab-cbor-comparison-key">
<table class="center" id="table-3">
        <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-configuration-key-for" class="selfRef">Configuration key for     <span class="cite xref">Table 2</span>
.</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="2" colspan="1">Item</th>
            <th class="text-center" rowspan="1" colspan="3">application/dns+cbor configuration</th>
          </tr>
          <tr>
            <th class="text-right" rowspan="1" colspan="1">best case</th>
            <th class="text-right" rowspan="1" colspan="1">realistic worst case</th>
            <th class="text-right" rowspan="1" colspan="1">theoretical worst case</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Header (ID &amp; Flags)</td>
            <td class="text-right" rowspan="1" colspan="1">Flags elided</td>
            <td class="text-right" rowspan="1" colspan="1">QR, Opcode, AA, TC, or RD are set</td>
            <td class="text-right" rowspan="1" colspan="1">QR, Opcode, AA, TC, or RD are set</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Count fields</td>
            <td class="text-right" rowspan="1" colspan="1">Encoded in CBOR array header</td>
            <td class="text-right" rowspan="1" colspan="1">Encoded in CBOR array header,        <br>
&gt;255 records in section</td>
            <td class="text-right" rowspan="1" colspan="1">Encoded in CBOR array header,        <br>
&gt;255 records in section</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Question section</td>
            <td class="text-right" rowspan="1" colspan="1">Class, type, and name elided</td>
            <td class="text-right" rowspan="1" colspan="1">Type &gt; 255,        <br>
name len. &gt; 255</td>
            <td class="text-right" rowspan="1" colspan="1">Type &gt; 255,        <br>
Class &gt; 255,        <br>
name len. &gt; 255</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Standard RR</td>
            <td class="text-right" rowspan="1" colspan="1">Class, type, and name elided,        <br>
rdata len. &lt; 24</td>
            <td class="text-right" rowspan="1" colspan="1">Type &gt; 255,        <br>
name len. &gt; 255        <br>
rdata len. &gt; 255</td>
            <td class="text-right" rowspan="1" colspan="1">Type &gt; 255,        <br>
Class &gt; 255,        <br>
name len. &gt; 255        <br>
rdata len. &gt; 255</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EDNS Opt Pseudo-RR</td>
            <td class="text-right" rowspan="1" colspan="1">All EDNS(0) fields elided</td>
            <td class="text-right" rowspan="1" colspan="1">Rcode &lt; 24,        <br>
DO flag set,        <br>
            </td>
            <td class="text-right" rowspan="1" colspan="1">UDP payload        <br>
len. &gt; 255        <br>
Rcode &gt; 255        <br>
Version &gt; 255        <br>
DO flag set</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EDNS Option</td>
            <td class="text-right" rowspan="1" colspan="1">Code &lt; 24        <br>
Length &lt; 24</td>
            <td class="text-right" rowspan="1" colspan="1">Code &lt; 24        <br>
Length &gt; 255</td>
            <td class="text-right" rowspan="1" colspan="1">Code &gt; 255        <br>
Length &gt; 255</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="change-log">
<section id="appendix-C">
      <h2 id="name-change-log">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<div id="since-draft-lenders-dns-cbor-06">
<section id="appendix-C.1">
        <h3 id="name-since-draft-lenders-dns-cbo">
<a href="#appendix-C.1" class="section-number selfRef">C.1. </a><a href="#name-since-draft-lenders-dns-cbo" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-06">draft-lenders-dns-cbor-06</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.1-1.1">
            <p id="appendix-C.1-1.1.1">Fixes wording and spelling mistakes<a href="#appendix-C.1-1.1.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-05">
<section id="appendix-C.2">
        <h3 id="name-since-draft-lenders-dns-cbor">
<a href="#appendix-C.2" class="section-number selfRef">C.2. </a><a href="#name-since-draft-lenders-dns-cbor" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-05">draft-lenders-dns-cbor-05</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.2-1.1">
            <p id="appendix-C.2-1.1.1">Fix <a href="#cf-app-d-c" class="auto internal xref">Section 7.2.1</a> title<a href="#appendix-C.2-1.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.2-1.2">
            <p id="appendix-C.2-1.2.1">Amend for capability to carry more than one question<a href="#appendix-C.2-1.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.2-1.3">
            <p id="appendix-C.2-1.3.1">Hint at future of name compression in later draft versions<a href="#appendix-C.2-1.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.2-1.4">
            <p id="appendix-C.2-1.4.1">Use canonical name for CBOR-packed<a href="#appendix-C.2-1.4.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-04">
<section id="appendix-C.3">
        <h3 id="name-since-draft-lenders-dns-cbor-">
<a href="#appendix-C.3" class="section-number selfRef">C.3. </a><a href="#name-since-draft-lenders-dns-cbor-" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-04">draft-lenders-dns-cbor-04</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.3-1.1">
            <p id="appendix-C.3-1.1.1">Add Implementation Status section<a href="#appendix-C.3-1.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.3-1.2">
            <p id="appendix-C.3-1.2.1">Remove int as representation for rdata<a href="#appendix-C.3-1.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.3-1.3">
            <p id="appendix-C.3-1.3.1">Add note on representation of more structured rdata<a href="#appendix-C.3-1.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-03">
<section id="appendix-C.4">
        <h3 id="name-since-draft-lenders-dns-cbor-0">
<a href="#appendix-C.4" class="section-number selfRef">C.4. </a><a href="#name-since-draft-lenders-dns-cbor-0" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-03">draft-lenders-dns-cbor-03</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.4-1.1">
            <p id="appendix-C.4-1.1.1">Provide format description for EDNS OPT Pseudo-RRs<a href="#appendix-C.4-1.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.4-1.2">
            <p id="appendix-C.4-1.2.1">Simplify CDDL to more idiomatic style<a href="#appendix-C.4-1.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.4-1.3">
            <p id="appendix-C.4-1.3.1">Remove DNS transaction IDs<a href="#appendix-C.4-1.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-02">
<section id="appendix-C.5">
        <h3 id="name-since-draft-lenders-dns-cbor-02">
<a href="#appendix-C.5" class="section-number selfRef">C.5. </a><a href="#name-since-draft-lenders-dns-cbor-02" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-02">draft-lenders-dns-cbor-02</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.5-1.1">
            <p id="appendix-C.5-1.1.1">Add Discussion section and note on compression<a href="#appendix-C.5-1.1.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-01">
<section id="appendix-C.6">
        <h3 id="name-since-draft-lenders-dns-cbor-01">
<a href="#appendix-C.6" class="section-number selfRef">C.6. </a><a href="#name-since-draft-lenders-dns-cbor-01" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-01">draft-lenders-dns-cbor-01</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.6-1.1">
            <p id="appendix-C.6-1.1.1">Use MIME type parameter for packed instead of own MIME type<a href="#appendix-C.6-1.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.6-1.2">
            <p id="appendix-C.6-1.2.1">Update definitions to accommodate for TID and flags, as well as more sections in query<a href="#appendix-C.6-1.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.6-1.3">
            <p id="appendix-C.6-1.3.1">Clarify fallback to wire-format<a href="#appendix-C.6-1.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-cbor-00">
<section id="appendix-C.7">
        <h3 id="name-since-draft-lenders-dns-cbor-00">
<a href="#appendix-C.7" class="section-number selfRef">C.7. </a><a href="#name-since-draft-lenders-dns-cbor-00" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-cbor-00">draft-lenders-dns-cbor-00</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-C.7-1.1">
            <p id="appendix-C.7-1.1.1">Add support for DNS transaction IDs<a href="#appendix-C.7-1.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.7-1.2">
            <p id="appendix-C.7-1.2.1">Name and Address compression utilizing CBOR-packed<a href="#appendix-C.7-1.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-C.7-1.3">
            <p id="appendix-C.7-1.3.1">Minor fixes to CBOR EDN and CDDL<a href="#appendix-C.7-1.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-D">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-D-1">TODO acknowledge.<a href="#appendix-D-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martine Sophie Lenders</span></div>
<div dir="auto" class="left"><span class="org">TUD Dresden University of Technology</span></div>
<div dir="auto" class="left"><span class="street-address">Helmholtzstr. 10</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-01069</span> <span class="locality">Dresden</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:martine.lenders@tu-dresden.de" class="email">martine.lenders@tu-dresden.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Carsten Bormann</span></div>
<div dir="auto" class="left"><span class="org">UniversitÃ¤t Bremen TZI</span></div>
<div dir="auto" class="left"><span class="street-address">Postfach 330440</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-28359</span> <span class="locality">Bremen</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+49-421-218-63921" class="tel">+49-421-218-63921</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:cabo@tzi.org" class="email">cabo@tzi.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas C. Schmidt</span></div>
<div dir="auto" class="left"><span class="org">HAW Hamburg</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:t.schmidt@haw-hamburg.de" class="email">t.schmidt@haw-hamburg.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthias WÃ¤hlisch</span></div>
<div dir="auto" class="left"><span class="org">TUD Dresden University of Technology &amp; Barkhausen Institut</span></div>
<div dir="auto" class="left"><span class="street-address">Helmholtzstr. 10</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-01069</span> <span class="locality">Dresden</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:m.waehlisch@tu-dresden.de" class="email">m.waehlisch@tu-dresden.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
